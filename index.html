<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>í†µì‹ ì‚¬ë³„ í”„ë¦¬ë¯¸ì—„ ì‹œì„¸í‘œ ì—ë””í„°</title>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <style>
        :root { --sk: #e60012; --kt: #00b0ca; --lg: #e6007e; --bg: #f1f5f9; }
        body { font-family: 'Pretendard', sans-serif; background: var(--bg); display: flex; justify-content: center; padding: 20px; gap: 20px; }
        
        /* ì—ë””í„° ì„¤ì • */
        .editor-container { width: 550px; background: #fff; padding: 25px; border-radius: 12px; box-shadow: 0 10px 15px rgba(0,0,0,0.1); }
        .config-box { background: #f8fafc; padding: 15px; border-radius: 8px; margin-bottom: 20px; border: 1px solid #e2e8f0; }
        .input-row { display: grid; grid-template-columns: 1.5fr 1fr 1fr 45px; gap: 8px; margin-bottom: 8px; align-items: center; }
        input { padding: 8px; border: 1px solid #cbd5e1; border-radius: 4px; font-size: 13px; width: 100%; box-sizing: border-box; }
        
        /* ë¯¸ë¦¬ë³´ê¸° ë””ìì¸ */
        #capture-area { background: #fff; width: 440px; padding: 25px; border: 1px solid #333; }
        .shop-header { text-align: center; margin-bottom: 20px; }
        .main-title { font-size: 26px; font-weight: 900; color: #1e293b; margin-bottom: 5px; }
        
        /* í†µì‹ ì‚¬ë³„ í…Œì´ë¸” ìŠ¤íƒ€ì¼ */
        .telecom-section { margin-bottom: 25px; }
        .table-header { color: white; padding: 10px; font-weight: bold; text-align: center; font-size: 16px; border-radius: 6px 6px 0 0; }
        .sk { background: var(--sk); }
        .kt { background: var(--kt); }
        .lg { background: var(--lg); }
        .int { background: #334155; }

        table { width: 100%; border-collapse: collapse; table-layout: fixed; }
        th { background: #f1f5f9; border: 1px solid #ccc; padding: 6px; font-size: 11px; color: #64748b; }
        td { border: 1px solid #ccc; padding: 9px; text-align: center; font-size: 14px; }
        .model-name { text-align: left; padding-left: 10px; font-weight: 600; font-size: 13px; }
        .price { color: #e11d48; font-weight: 800; }

        .btn { cursor: pointer; border: none; border-radius: 6px; font-weight: bold; }
        .btn-add { background: #10b981; color: white; padding: 5px 10px; font-size: 11px; }
        .btn-del { background: #ef4444; color: white; height: 32px; }
        .btn-save { background: #1e293b; color: white; width: 100%; padding: 18px; font-size: 18px; margin-top: 10px; }
    </style>
</head>
<body>

<div class="editor-container">
    <h2>ğŸ“± í†µì‹ ì‚¬ë³„ ì‹œì„¸ í¸ì§‘</h2>
    <div class="config-box">
        ë§¤ì¥ëª…: <input type="text" id="shopName" value="ìš°ë¦¬ë™ë„¤ íœ´ëŒ€í° ì„±ì§€" oninput="render()">
        ë‚ ì§œ: <input type="text" id="date" value="2026-01-29" oninput="render()">
    </div>

    <div id="editor-list"></div>
    <button class="btn btn-save" onclick="saveImage()">ğŸ“¸ ì‹œì„¸í‘œ ì´ë¯¸ì§€ ì €ì¥</button>
</div>

<div id="capture-area">
    <div class="shop-header">
        <div class="main-title" id="v-shopName">ìš°ë¦¬ë™ë„¤ íœ´ëŒ€í° ì„±ì§€</div>
        <div style="color:#64748b; font-size:14px;">ğŸ“… <span id="v-date">2026-01-29</span> ë‹¨ê°€í‘œ</div>
    </div>
    <div id="render-zone"></div>
</div>

<script>
    const data = [
        { id: 'sk', name: 'SK Telecom (109ìš”ê¸ˆì œ)', color: 'sk', rows: [{n:'ê°¤ëŸ­ì‹œ S24', m:'5', c:'10'}] },
        { id: 'kt', name: 'KT (110ìš”ê¸ˆì œ)', color: 'kt', rows: [{n:'ì•„ì´í° 15', m:'20', c:'25'}] },
        { id: 'lg', name: 'LG U+ (105ìš”ê¸ˆì œ)', color: 'lg', rows: [{n:'ê°¤ëŸ­ì‹œ Zí”Œë¦½5', m:'0', c:'5'}] },
        { id: 'int', name: 'ğŸŒ ì¸í„°ë„·+TV ê²°í•©ì‚¬ì€í’ˆ', color: 'int', rows: [{n:'LG+TV (3ë…„)', m:'ìµœëŒ€ì§€ì›', c:'ì‚¬ì€í’ˆì¦ì •'}] }
    ];

    function init() {
        const list = document.getElementById('editor-list');
        list.innerHTML = '';
        data.forEach((sec, sIdx) => {
            const div = document.createElement('div');
            div.className = 'config-box';
            div.innerHTML = `
                <div style="display:flex; justify-content:space-between; margin-bottom:10px;">
                    <strong style="color:var(--${sec.color})">${sec.name}</strong>
                    <button class="btn btn-add" onclick="addRow(${sIdx})">+ ì¶”ê°€</button>
                </div>
                <div id="rows-${sIdx}">
                    ${sec.rows.map((r, rIdx) => `
                        <div class="input-row">
                            <input type="text" value="${r.n}" oninput="upd(${sIdx},${rIdx},'n',this.value)" placeholder="ëª¨ë¸/ìƒí’ˆ">
                            <input type="text" value="${r.m}" oninput="upd(${sIdx},${rIdx},'m',this.value)" placeholder="ë²ˆì´/ì§€ì›">
                            <input type="text" value="${r.c}" oninput="upd(${sIdx},${rIdx},'c',this.value)" placeholder="ê¸°ë³€/ë¹„ê³ ">
                            <button class="btn btn-del" onclick="delRow(${sIdx},${rIdx})">X</button>
                        </div>
                    `).join('')}
                </div>`;
            list.appendChild(div);
        });
        render();
    }

    function addRow(sIdx) { data[sIdx].rows.push({n:'', m:'', c:''}); init(); }
    function delRow(sIdx, rIdx) { data[sIdx].rows.splice(rIdx, 1); init(); }
    function upd(sIdx, rIdx, k, v) { data[sIdx].rows[rIdx][k] = v; render(); }

    function render() {
        document.getElementById('v-shopName').innerText = document.getElementById('shopName').value;
        document.getElementById('v-date').innerText = document.getElementById('date').value;
        const zone = document.getElementById('render-zone');
        zone.innerHTML = '';

        data.forEach(sec => {
            if(sec.rows.length === 0) return;
            let h = `<div class="telecom-section">
                <div class="table-header ${sec.color}">${sec.name}</div>
                <table>
                    <tr><th width="45%">ëª¨ë¸ëª…</th><th width="27.5%">ë²ˆí˜¸ì´ë™</th><th width="27.5%">ê¸°ê¸°ë³€ê²½</th></tr>
                    ${sec.rows.map(r => `
                        <tr>
                            <td class="model-name">${r.n || '-'}</td>
                            <td class="price">${r.m || '-'}</td>
                            <td class="price">${r.c || '-'}</td>
                        </tr>`).join('')}
                </table>
            </div>`;
            zone.innerHTML += h;
        });
    }

    function saveImage() {
        html2canvas(document.querySelector("#capture-area"), {scale:3}).then(canvas => {
            const link = document.createElement('a');
            link.download = `ì‹œì„¸í‘œ_${document.getElementById('date').value}.png`;
            link.href = canvas.toDataURL();
            link.click();
        });
    }
    init();
</script>
</body>
</html>
