<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Premium í†µí•© ì‹œì„¸í‘œ ì—ë””í„°</title>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <style>
        :root { --primary: #4f46e5; --bg: #f1f5f9; --card: #ffffff; --danger: #ef4444; }
        body { font-family: 'Pretendard', sans-serif; background: var(--bg); display: flex; justify-content: center; padding: 20px; gap: 20px; }
        
        /* ì—ë””í„° ë ˆì´ì•„ì›ƒ */
        .editor-container { width: 550px; background: var(--card); padding: 25px; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .category-box { border: 1px solid #e2e8f0; padding: 15px; border-radius: 8px; margin-bottom: 20px; background: #fafafa; }
        .category-title { font-weight: bold; margin-bottom: 12px; color: var(--primary); display: flex; justify-content: space-between; align-items: center; }
        
        /* ì…ë ¥ì°½ ê·¸ë¦¬ë“œ ìˆ˜ì • (Xë²„íŠ¼ ì•ˆìœ¼ë¡œ í¬í•¨) */
        .input-row { display: grid; gap: 8px; margin-bottom: 8px; align-items: center; background: #fff; padding: 5px; border-radius: 4px; border: 1px solid #eee; }
        .row-mobile { grid-template-columns: 1.5fr 1fr 1fr 45px; } /* ì¼ë°˜ íœ´ëŒ€í°ìš© */
        .row-internet { grid-template-columns: 1.5fr 1.5fr 0.5fr 45px; } /* ì¸í„°ë„·ìš© */
        
        input { padding: 8px; border: 1px solid #cbd5e1; border-radius: 4px; font-size: 13px; width: 100%; box-sizing: border-box; }
        
        /* ë¯¸ë¦¬ë³´ê¸° ë ˆì´ì•„ì›ƒ */
        .preview-container { position: sticky; top: 20px; }
        #capture-area { background: #fff; width: 420px; padding: 20px; border: 1px solid #333; }
        .main-header { background: #333; color: #fff; text-align: center; padding: 12px; font-size: 18px; font-weight: bold; margin-bottom: 15px; }
        
        .section-table { width: 100%; border-collapse: collapse; margin-bottom: 20px; table-layout: fixed; }
        .section-table th { background: #f8fafc; border: 1px solid #ccc; padding: 8px; font-size: 12px; }
        .section-table td { border: 1px solid #ccc; padding: 8px; text-align: center; font-size: 13px; word-break: break-all; }
        .cat-header { background: var(--primary) !important; color: white !important; font-weight: bold; font-size: 14px; }
        .price-text { color: #e11d48; font-weight: bold; }

        /* ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .btn { cursor: pointer; border: none; border-radius: 4px; font-weight: bold; transition: 0.2s; }
        .btn-add { background: #10b981; color: white; padding: 6px 12px; font-size: 12px; }
        .btn-del { background: var(--danger); color: white; height: 32px; font-size: 12px; }
        .btn-save { background: #333; color: white; width: 100%; padding: 15px; font-size: 16px; margin-top: 10px; border-radius: 8px; }
        .btn:hover { opacity: 0.8; }
    </style>
</head>
<body>

<div class="editor-container">
    <h2 style="margin-top:0">ğŸ“ ì‹œì„¸í‘œ í†µí•© í¸ì§‘</h2>
    <div style="margin-bottom:20px; background: #eef2ff; padding: 15px; border-radius: 8px;">
        ğŸ“… ì—…ë°ì´íŠ¸ ë‚ ì§œ: <input type="text" id="dateInput" value="2026-01-29" oninput="renderTable()" style="width:140px; margin-left: 10px;">
    </div>

    <div id="editor-fields"></div>

    <button class="btn btn-save" onclick="saveImage()">ğŸ“¸ ì´ë¯¸ì§€ë¡œ ì €ì¥í•˜ê¸°</button>
</div>

<div class="preview-container">
    <div id="capture-area">
        <div class="main-header">ğŸ“± ì„±ì§€ í†µí•© ì‹œì„¸í‘œ (<span id="viewDate">2026-01-29</span>)</div>
        <div id="table-render-zone"></div>
        <p style="font-size:11px; color:#666; text-align:center; margin-top: 10px;">â€» ì‹¤ì œ ì‹œì„¸ì™€ ë‹¤ë¥¼ ìˆ˜ ìˆìœ¼ë‹ˆ ë°©ë¬¸ ì „ í™•ì¸ ë°”ëë‹ˆë‹¤.</p>
    </div>
</div>

<script>
    // ë°ì´í„° êµ¬ì¡° (ì¸í„°ë„· í•­ëª©ì€ í•„ë“œëª…ì´ ë‹¤ë¦„)
    const categories = [
        { id: 'galaxy', name: 'âœ¨ GALAXY (ì‚¼ì„±)', type: 'mobile', rows: [{v1:'', v2:'', v3:''}] },
        { id: 'iphone', name: 'ğŸ IPHONE (ì• í”Œ)', type: 'mobile', rows: [{v1:'', v2:'', v3:''}] },
        { id: 'kids', name: 'ğŸ‘¶ í‚¤ì¦ˆí°/íš¨ë„í°', type: 'mobile', rows: [{v1:'', v2:'', v3:''}] },
        { id: 'internet', name: 'ğŸŒ ì¸í„°ë„· + TV ê²°í•©', type: 'internet', rows: [{v1:'', v2:'', v3:''}] }
    ];

    function initEditor() {
        const container = document.getElementById('editor-fields');
        container.innerHTML = '';

        categories.forEach((cat, catIdx) => {
            const isInternet = cat.type === 'internet';
            const box = document.createElement('div');
            box.className = 'category-box';
            box.innerHTML = `
                <div class="category-title">
                    <span>${cat.name}</span>
                    <button class="btn btn-add" onclick="addRow(${catIdx})">+ ì¤„ ì¶”ê°€</button>
                </div>
                <div id="cat-rows-${catIdx}">
                    ${cat.rows.map((row, rowIdx) => `
                        <div class="input-row ${isInternet ? 'row-internet' : 'row-mobile'}">
                            <input type="text" placeholder="${isInternet ? 'ìƒí’ˆëª…(ì˜ˆ: LG+TV)' : 'ëª¨ë¸ëª…'}" value="${row.v1}" oninput="updateData(${catIdx}, ${rowIdx}, 'v1', this.value)">
                            <input type="text" placeholder="${isInternet ? 'í˜„ê¸ˆì§€ì›' : 'ë²ˆì´'}" value="${row.v2}" oninput="updateData(${catIdx}, ${rowIdx}, 'v2', this.value)">
                            <input type="text" placeholder="${isInternet ? 'ë¹„ê³ ' : 'ê¸°ë³€'}" value="${row.v3}" oninput="updateData(${catIdx}, ${rowIdx}, 'v3', this.value)">
                            <button class="btn btn-del" onclick="delRow(${catIdx}, ${rowIdx})">ì‚­ì œ</button>
                        </div>
                    `).join('')}
                </div>
            `;
            container.appendChild(box);
        });
        renderTable();
    }

    function addRow(catIdx) {
        categories[catIdx].rows.push({v1:'', v2:'', v3:''});
        initEditor();
    }

    function delRow(catIdx, rowIdx) {
        categories[catIdx].rows.splice(rowIdx, 1);
        initEditor();
    }

    function updateData(catIdx, rowIdx, field, val) {
        categories[catIdx].rows[rowIdx][field] = val;
        renderTable();
    }

    function renderTable() {
        document.getElementById('viewDate').innerText = document.getElementById('dateInput').value;
        const zone = document.getElementById('table-render-zone');
        zone.innerHTML = '';

        categories.forEach(cat => {
            if(cat.rows.length === 0) return;
            const isInt = cat.type === 'internet';

            let html = `<table class="section-table">
                <thead>
                    <tr><th colspan="3" class="cat-header">${cat.name}</th></tr>
                    <tr>
                        <th width="45%">${isInt ? 'ìƒí’ˆëª…' : 'ëª¨ë¸ëª…'}</th>
                        <th width="27.5%">${isInt ? 'ì§€ì›ê¸ˆ' : 'ë²ˆí˜¸ì´ë™'}</th>
                        <th width="27.5%">${isInt ? 'ë¹„ê³ ' : 'ê¸°ê¸°ë³€ê²½'}</th>
                    </tr>
                </thead>
                <tbody>`;
            
            cat.rows.forEach(row => {
                html += `<tr>
                    <td style="text-align:left; font-weight:600;">${row.v1 || '-'}</td>
                    <td class="price-text">${row.v2 || '-'}</td>
                    <td class="${isInt ? '' : 'price-text'}">${row.v3 || '-'}</td>
                </tr>`;
            });

            html += `</tbody></table>`;
            zone.innerHTML += html;
        });
    }

    function saveImage() {
        const area = document.getElementById('capture-area');
        html2canvas(area, { scale: 2 }).then(canvas => {
            const link = document.createElement('a');
            link.download = `ì‹œì„¸í‘œ_${document.getElementById('dateInput').value}.png`;
            link.href = canvas.toDataURL('image/png');
            link.click();
        });
    }

    initEditor();
</script>

</body>
</html>
