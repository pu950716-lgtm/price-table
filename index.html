<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ì¢…í•© í†µí•© ì‹œì„¸í‘œ ì—ë””í„°</title>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <style>
        :root { --sk: #e60012; --kt: #00b0ca; --lg: #e6007e; --bg: #f1f5f9; }
        body { font-family: 'Pretendard', sans-serif; background: var(--bg); display: flex; flex-direction: column; align-items: center; padding: 20px; }
        
        /* ì—ë””í„° ë””ìì¸ */
        .editor-container { width: 100%; max-width: 950px; background: #fff; padding: 25px; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); margin-bottom: 20px; }
        .cat-section { border: 1px solid #e2e8f0; padding: 15px; border-radius: 8px; margin-bottom: 20px; background: #fafafa; }
        .cat-header-edit { font-weight: bold; color: #4f46e5; margin-bottom: 10px; display: flex; justify-content: space-between; }
        .input-row { display: grid; grid-template-columns: 2fr repeat(6, 1fr) 45px; gap: 5px; margin-bottom: 5px; }
        input { width: 100%; padding: 6px; border: 1px solid #ddd; border-radius: 4px; font-size: 12px; text-align: center; }
        
        /* ë¯¸ë¦¬ë³´ê¸° ë””ìì¸ */
        #capture-area { background: #fff; width: 900px; padding: 30px; border: 1px solid #333; }
        .main-title { text-align: center; font-size: 28px; font-weight: 900; margin-bottom: 20px; }
        
        table { width: 100%; border-collapse: collapse; border: 2px solid #333; table-layout: fixed; margin-bottom: 20px; }
        th, td { border: 1px solid #333; padding: 10px; text-align: center; font-size: 14px; }
        
        .th-main { background: #333; color: #fff; font-weight: bold; }
        .th-sk { background: var(--sk); color: #fff; }
        .th-kt { background: var(--kt); color: #fff; }
        .th-lg { background: var(--lg); color: #fff; }
        .cat-row-title { background: #f1f5f9; font-weight: 800; color: #334155; text-align: left; padding-left: 15px; font-size: 15px; }
        
        .price { font-weight: 800; color: #e11d48; }
        .model-name { font-weight: 600; text-align: left; padding-left: 15px; }

        .btn { cursor: pointer; border: none; border-radius: 4px; font-weight: bold; }
        .btn-add { background: #10b981; color: white; padding: 5px 12px; font-size: 12px; }
        .btn-save { background: #1e293b; color: white; padding: 15px 40px; font-size: 18px; width: 100%; max-width: 950px; }
    </style>
</head>
<body>

<div class="editor-container">
    <h2>ğŸ“‘ ì¹´í…Œê³ ë¦¬ë³„ 3ì‚¬ í†µí•© í¸ì§‘</h2>
    <div id="editor-zone"></div>
</div>

<div id="capture-area">
    <div class="main-title">ğŸ“± 3ì‚¬ í†µì‹ ì‚¬ ëª¨ë¸ë³„ í†µí•© ì‹œì„¸í‘œ</div>
    <table>
        <thead>
            <tr>
                <th rowspan="2" class="th-main" width="20%">ëª¨ë¸ëª…</th>
                <th colspan="2" class="th-sk">SK Telecom</th>
                <th colspan="2" class="th-kt">KT</th>
                <th colspan="2" class="th-lg">LG U+</th>
            </tr>
            <tr>
                <th style="font-size:11px">ë²ˆì´</th><th style="font-size:11px">ê¸°ë³€</th>
                <th style="font-size:11px">ë²ˆì´</th><th style="font-size:11px">ê¸°ë³€</th>
                <th style="font-size:11px">ë²ˆì´</th><th style="font-size:11px">ê¸°ë³€</th>
            </tr>
        </thead>
        <tbody id="table-body"></tbody>
    </table>
</div>

<button class="btn btn-save" onclick="saveImage()">ğŸ“¸ í†µí•© ì‹œì„¸í‘œ ì´ë¯¸ì§€ ì €ì¥</button>

<script>
    const categories = [
        { name: 'âœ¨ GALAXY (ì‚¼ì„±)', rows: [{n:'ê°¤ëŸ­ì‹œ S24', skb:'0', skg:'10', ktb:'5', ktg:'15', lgb:'-5', lgg:'5'}] },
        { name: 'ğŸ IPHONE (ì• í”Œ)', rows: [{n:'ì•„ì´í° 15 Pro', skb:'40', skg:'45', ktb:'38', ktg:'42', lgb:'35', lgg:'40'}] },
        { name: 'ğŸ‘¶ í‚¤ì¦ˆí° / íš¨ë„í°', rows: [{n:'ì‹œë‚˜ëª¨ë¡¤í° 2', skb:'ê³µì§œ', skg:'ê³µì§œ', ktb:'0', ktg:'0', lgb:'-10', lgg:'0'}] }
    ];

    function render() {
        const editorZone = document.getElementById('editor-zone');
        const tableBody = document.getElementById('table-body');
        editorZone.innerHTML = '';
        tableBody.innerHTML = '';

        categories.forEach((cat, cIdx) => {
            // ì—ë””í„° ì„¹ì…˜ ìƒì„±
            const sec = document.createElement('div');
            sec.className = 'cat-section';
            sec.innerHTML = `
                <div class="cat-header-edit">
                    <span>${cat.name}</span>
                    <button class="btn btn-add" onclick="addRow(${cIdx})">+ í–‰ ì¶”ê°€</button>
                </div>
                <div id="rows-${cIdx}">
                    ${cat.rows.map((r, rIdx) => `
                        <div class="input-row">
                            <input type="text" value="${r.n}" oninput="upd(${cIdx},${rIdx},'n',this.value)" placeholder="ëª¨ë¸ëª…">
                            <input type="text" value="${r.skb}" oninput="upd(${cIdx},${rIdx},'skb',this.value)">
                            <input type="text" value="${r.skg}" oninput="upd(${cIdx},${rIdx},'skg',this.value)">
                            <input type="text" value="${r.ktb}" oninput="upd(${cIdx},${rIdx},'ktb',this.value)">
                            <input type="text" value="${r.ktg}" oninput="upd(${cIdx},${rIdx},'ktg',this.value)">
                            <input type="text" value="${r.lgb}" oninput="upd(${cIdx},${rIdx},'lgb',this.value)">
                            <input type="text" value="${r.lgg}" oninput="upd(${cIdx},${rIdx},'lgg',this.value)">
                            <button class="btn" style="background:#ef4444; color:#fff;" onclick="del(${cIdx},${rIdx})">X</button>
                        </div>
                    `).join('')}
                </div>`;
            editorZone.appendChild(sec);

            // í…Œì´ë¸” ë³¸ë¬¸ ìƒì„±
            if(cat.rows.length > 0) {
                const trHead = document.createElement('tr');
                trHead.innerHTML = `<td colspan="7" class="cat-row-title">${cat.name}</td>`;
                tableBody.appendChild(trHead);

                cat.rows.forEach(r => {
                    const tr = document.createElement('tr');
                    tr.innerHTML = `
                        <td class="model-name">${r.n || '-'}</td>
                        <td class="price">${r.skb || '-'}</td><td class="price">${r.skg || '-'}</td>
                        <td class="price">${r.ktb || '-'}</td><td class="price">${r.ktg || '-'}</td>
                        <td class="price">${r.lgb || '-'}</td><td class="price">${r.lgg || '-'}</td>
                    `;
                    tableBody.appendChild(tr);
                });
            }
        });
    }

    function addRow(cIdx) { categories[cIdx].rows.push({n:'', skb:'', skg:'', ktb:'', ktg:'', lgb:'', lgg:''}); render(); }
    function del(cIdx, rIdx) { categories[cIdx].rows.splice(rIdx, 1); render(); }
    function upd(cIdx, rIdx, k, v) { categories[cIdx].rows[rIdx][k] = v; render(); }

    function saveImage() {
        html2canvas(document.querySelector("#capture-area"), {scale:2}).then(canvas => {
            const link = document.createElement('a');
            link.download = `3ì‚¬_í†µí•©_ì‹œì„¸í‘œ.png`;
            link.href = canvas.toDataURL();
            link.click();
        });
    }

    render();
</script>
</body>
</html>
